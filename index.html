<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Adotea√≠</title>
</head>

<body>
    <header>
        <nav class="navbar">
             <div class="logo-container">
                <img src="https://i.postimg.cc/BvbcYbWy/Chat-GPT-Image-16-de-out-de-2025-10-56-29-removebg-preview-1.png" class="logo">
            </div>
           
            <ul class="nav-links">
                <li><a href="#home">Inicio</a></li>
                <li><a href="#sobre">Sobre</a></li>  
                <li><a href="#pets">Pets</a></li>
                <li><a href="#localiza√ß√£o">Localiza√ß√£o</a></li>
                <li><a href="cadastre-se.html">Cadastre-se</a></li> 
                <li><a href="teste-login.html">Entrar</a></li>
            </ul>

        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="hero-conteudo">
                <h1> Bem-vindo ao Adotea√≠! </h1>
                <p> Adote hoje seu amiguinho </p>
                <a href="#pets" class="btn">conhe√ßam nossos pets dispon√≠veis </a>
            </div>
        </section>

        <section id="sobre" class="sobre">
            <div class="container">
                <h2> Sobre n√≥s</h2>
                <p>O AdoteA√≠ nasceu com o prop√≥sito de aproximar pessoas e animais por meio da tecnologia.
                    Somos uma plataforma digital criada para facilitar o processo de ado√ß√£o e dar visibilidade a pets que
                    aguardam um lar cheio de amor.

                    Acreditamos que adotar √© um ato de carinho, empatia e responsabilidade.
                    Por isso, desenvolvemos um espa√ßo seguro, simples e acess√≠vel, onde ONGs, protetores independentes e
                    adotantes podem se conectar de forma pr√°tica e transparente.

                    Nosso compromisso √© com o bem-estar animal e com a constru√ß√£o de uma sociedade mais consciente.
                    Cada cadastro, cada ado√ß√£o e cada hist√≥ria compartilhada aqui representa uma nova chance de felicidade ‚Äî
                    tanto para quem adota quanto para quem √© adotado.

                    üíõ AdoteA√≠ ‚Äî conectando cora√ß√µes, transformando vidas.</p>
            </div>
        </section>

       <section id="pets" class="pets">
    <div class="container">
        <h2>Nossos Pets dispon√≠veis</h2>
        <div class="carousel-container">
            <div class="carousel-track">
                <p style="grid-column: 1 / -1; text-align: center;">Carregando pets...</p>
            </div>
            <button class="carousel-button prev">‚ùÆ</button> <button class="carousel-button next">‚ùØ</button> </div>
    </div>
</section>

        <section id="localiza√ß√£o" class="localiza√ß√£o">
            <div class="container">
                <h2>Onde nosso escrit√≥rio fica:</h2>
                <div class="contato-info">
                    <p>Rua Manoel Herculano Pessoa, 201 - Janga, Paulista - PE</p>
                    <p>(81) 99650-4252</p>
                    <p>adoteai@gmail.coom</p>
                </div>
                <div class="mapa">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3951.741597978617!2d-34.825210999999996!3d-7.922036599999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7ab3e64ed509803%3A0xf24fb089823f833a!2sR.%20Manoel%20Herculano%20Pessoa%2C%20201%20-%20casa%201%20-%20Janga%2C%20Paulista%20-%20PE%2C%2053435-330!5e0!3m2!1spt-BR!2sbr!4v1760618220226!5m2!1spt-BR!2sbr"
                        width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>2025 AdoteA√≠ - Todos os direitos reservados</p>
    </footer>

    <script async src="https://app.gptmaker.ai/widget/3E8AC052784BB2D3367ACE803BDA0EC1/float.js"></script>

   <script type="module">
        // Importa as fun√ß√µes necess√°rias
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
        
        // Sua configura√ß√£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDc8aaQ2LoBe10kIqxSaCTEwj-FgLbJHJM",
            authDomain: "adoteai.firebaseapp.com",
            projectId: "adoteai",
            storageBucket: "adoteai.firebasestorage.app",
            messagingSenderId: "936118376881",
            appId: "1:936118376881:web:704edb4cb3b861fa58c590",
            measurementId: "G-5SWYF0Y1JK"
        };

        // Inicializa o Firebase e o Firestore
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); 
        
        // *******************************************************************
        // VARI√ÅVEIS E FUN√á√ïES DO CARROSSEL
        // *******************************************************************
        let currentSlide = 0;
        let cardWidth = 0; 
        const cardsToShow = 3; 

        function calculateCardWidth() {
            const track = document.querySelector('.carousel-track');
            const firstCard = track ? track.querySelector('.produto-card') : null;
            if (firstCard) {
                // Calcula a largura real do card, incluindo margens
                const style = getComputedStyle(firstCard);
                cardWidth = firstCard.offsetWidth + parseFloat(style.marginLeft) + parseFloat(style.marginRight);
            }
        }

        function updateCarousel() {
            const track = document.querySelector('.carousel-track');
            if (track && cardWidth > 0) {
                track.style.transform = `translateX(${-currentSlide * cardWidth}px)`;
            }
        }

        function moveCarousel(direction) {
            const track = document.querySelector('.carousel-track');
            if (!track) return;
            
            calculateCardWidth(); // Recalcula antes de mover

            const totalCards = track.children.length;
            if (totalCards === 0) return;

            let newSlide = currentSlide + direction;
            
            // L√≥gica para loop infinito ou limites
            if (newSlide < 0) {
                newSlide = totalCards - cardsToShow; // Volta para o final
            } else if (newSlide >= totalCards - (cardsToShow -1)) { 
                 // Ajusta limite para mostrar o √∫ltimo card sem espa√ßo em branco
                newSlide = 0; // Volta para o in√≠cio
            }
            
            currentSlide = newSlide;
            updateCarousel();
        }


        // *******************************************************************
        // FUN√á√ÉO PARA EXIBIR PETS (COM TRATAMENTO DE ERROS)
        // *******************************************************************
        async function exibirPets() {
            const carouselTrack = document.querySelector(".carousel-track");
            if (!carouselTrack) return; 

            // Deixa a mensagem de carregamento inicial
            carouselTrack.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; width: 100%;">Carregando pets...</p>';

            try {
                // 1. BUSCA DE DADOS
                const petsCollection = collection(db, "pets");
                const petSnapshot = await getDocs(petsCollection);
                
                carouselTrack.innerHTML = ''; // Limpa o aviso de carregamento
                
                if (petSnapshot.empty) {
                    carouselTrack.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; width: 100%;">Nenhum pet cadastrado no banco de dados.</p>';
                    return;
                }

                // 2. MONTAGEM DO HTML
                petSnapshot.forEach((doc) => {
                    const pet = doc.data();
                    const fotoUrl = pet.fotoUrl; // Puxando a URL da foto
                    
                    let mediaHTML;
                    
                    // L√ìGICA ATUALIZADA: Prioriza fotoUrl, se for uma string v√°lida
                    if (fotoUrl && typeof fotoUrl === 'string' && fotoUrl.trim() !== '') {
                        // Se houver foto, usa a tag <img>
                        mediaHTML = `<img src="${fotoUrl}" alt="Foto de ${pet.nome || 'Pet'}" class="pet-image">`;
                    } else {
                        // Se n√£o houver foto, usa o √≠cone (como fallback)
                        const icon = pet.tipo === 'Cachorro' ? 'üê∂' : (pet.tipo === 'Gato' ? 'üê±' : 'üêæ');
                        mediaHTML = `<div class="produto-icon">${icon}</div>`;
                    }
                    
                    const cardHTML = `
                        <article class="produto-card">
                            ${mediaHTML} <h3>${pet.nome || pet.tipo || 'Pet sem nome'}</h3> 
                            <p>Adote seu amiguinho</p>
                            <span class="descricao">${pet.descricao || 'Descri√ß√£o n√£o dispon√≠vel.'}</span>
                            <a href="teste-login.html" class="btn-adotar btn">Quero Adotar!</a> 
                        </article>
                    `;
                    carouselTrack.innerHTML += cardHTML;
                });
                
                // 3. INICIALIZA√á√ÉO DO CARROSSEL
                
                // Aguarda um momento para o navegador renderizar os cards antes de medir.
                window.requestAnimationFrame(() => {
                     calculateCardWidth(); 
                     updateCarousel();
                });
                

            } catch (error) {
                // Se o erro for na conex√£o, a mensagem "Carregando..." persiste
                console.error("ERRO GRAVE ao carregar pets do Firebase:", error);
                
                // Se der erro, substitui a mensagem de carregamento por um erro claro.
                carouselTrack.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: red; width: 100%;">Falha ao carregar os pets. Verifique a chave API ou as Regras do Firebase.</p>';
            }
        }

        // *******************************************************************
        // EVENT LISTENER PRINCIPAL
        // *******************************************************************
        document.addEventListener('DOMContentLoaded', () => {
            exibirPets(); 
            
            const prevButton = document.querySelector('.carousel-button.prev');
            const nextButton = document.querySelector('.carousel-button.next');

            if (prevButton) {
                prevButton.addEventListener('click', () => moveCarousel(-1));
            }
            if (nextButton) {
                nextButton.addEventListener('click', () => moveCarousel(1));
            }

            window.addEventListener('resize', () => {
                calculateCardWidth();
                updateCarousel();
            });
        }); 
    </script>
    </body>
</html>